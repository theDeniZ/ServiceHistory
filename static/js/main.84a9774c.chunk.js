(this["webpackJsonpservice-manager"]=this["webpackJsonpservice-manager"]||[]).push([[0],{103:function(e,n,t){},104:function(e,n,t){},118:function(e,n,t){"use strict";t.r(n),t.d(n,"store",(function(){return Ae}));var r,c=t(0),i=t.n(c),a=t(11),s=t.n(a),l=(t(103),t(104),t(26)),o=t(12),u=t(13),v="SERVICES_AVAILABLE",d=function(e){return{type:v,payload:e}},j=function(e,n){return function(t,r){var c=r().servicesReducer.services,i=[].concat(Object(u.a)(c.slice(0,n)),[e],Object(u.a)(c.slice(n+1)));t(d(i))}},b=function(e,n,t){var r=e[n];return e[n]=e[t],e[t]=r,e},f=t(155),m=t(121),O=t(145),g=t(77),h=t(18),p=t(161),x=t(3),k=function(e){var n=e.value,t=e.onChange,r=e.className;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(h.a,{utils:g.a,children:Object(x.jsx)(p.a,{disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",margin:"normal",label:e.children,value:n,onChange:function(e){t(e||n)},KeyboardButtonProps:{"aria-label":"change date"},className:r})})})},y=t(166),C=function(e){var n=e.value,t=e.onChange,r=e.className;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(y.a,{label:e.children,value:n,onChange:function(e){t(e.target.value)},className:r})})},S=t(151),A=t(57),F=t.n(A),I=t(156),w=t(157),N=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},moveActions:{width:e.spacing(16),display:"inline-block"}}})),D=function(e){var n=e.className,t=e.totalCount,r=e.currentIndex,c=r>0,i=r<t-1,a=N();return Object(x.jsxs)("div",{className:n,children:[Object(x.jsx)(S.a,{"aria-label":"delete",className:a.margin,onClick:function(){e.onServiceDeleteAction(r)},children:Object(x.jsx)(F.a,{})}),Object(x.jsxs)("div",{className:a.moveActions,children:[c&&Object(x.jsx)(S.a,{"aria-label":"move_up",className:a.margin,onClick:function(){e.onServiceMoveUpAction(r)},children:Object(x.jsx)(I.a,{})}),i&&Object(x.jsx)(S.a,{"aria-label":"move_down",className:a.margin,onClick:function(){e.onServiceMoveDownAction(r)},children:Object(x.jsx)(w.a,{})})]})]})},R=t(158),T=t(164),U=function(e){var n=e.value,t=e.onChange,r=e.className;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(R.a,{control:Object(x.jsx)(T.a,{checked:n,onChange:function(e){t(e.target.checked)},name:"checkedB",color:"primary"}),label:e.children,className:r})})},B=t(150),M=t(4);!function(e){e.engineOil="1",e.frontBreaks="2",e.brakeFluid="3",e.microFilter="4",e.recirculatingAirFilter="5",e.rearBreaks="6",e.sparkPlugs="10",e.airFilter="11",e.fuelFilter="12",e.vehicleCheck="100",e.preDelivery="20",e.serviceInspection="21",e.statutoryInspection="32",e.emissionsTest="33"}(r||(r={}));var _=function(e){switch(e){case r.engineOil:return"Engine oil";case r.frontBreaks:return"Front breaks";case r.brakeFluid:return"Brake fluid";case r.microFilter:return"Microfilter";case r.recirculatingAirFilter:return"Recirculating air filter";case r.rearBreaks:return"Rear breaks";case r.sparkPlugs:return"Spark plugs";case r.airFilter:return"Air filter";case r.fuelFilter:return"Fuel filter";case r.vehicleCheck:return"Vehicle check";case r.preDelivery:return"Pre-delivery";case r.serviceInspection:return"Service inspection";case r.statutoryInspection:return"Statutory inspection";case r.emissionsTest:return"Emissions test"}},E=t(154),P=t(168),V=t(162),L=t(159),W=function(e){var n=e.className,t=e.options,r=e.value,c=e.onChange,i=e.required;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(E.a,{required:i,children:[Object(x.jsx)(P.a,{children:e.children}),Object(x.jsx)(V.a,{value:r,onChange:function(e){c(e.target.value)},className:n,children:t.map((function(e){return Object(x.jsx)(L.a,{value:e.value,children:e.label},e.value)}))})]})})},q=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},moveActions:{width:e.spacing(16),display:"inline-block"}}})),J=function(e){var n=e.serviceItem,t=e.onServiceTypeChanged,c=e.onServiceItemDeleted,i=q(),a=[{value:r.engineOil,label:_(r.engineOil)},{value:r.frontBreaks,label:_(r.frontBreaks)},{value:r.brakeFluid,label:_(r.brakeFluid)},{value:r.microFilter,label:_(r.microFilter)},{value:r.recirculatingAirFilter,label:_(r.recirculatingAirFilter)},{value:r.rearBreaks,label:_(r.rearBreaks)},{value:r.sparkPlugs,label:_(r.sparkPlugs)},{value:r.airFilter,label:_(r.airFilter)},{value:r.fuelFilter,label:_(r.fuelFilter)},{value:r.vehicleCheck,label:_(r.vehicleCheck)},{value:r.preDelivery,label:_(r.preDelivery)},{value:r.serviceInspection,label:_(r.serviceInspection)},{value:r.statutoryInspection,label:_(r.statutoryInspection)},{value:r.emissionsTest,label:_(r.emissionsTest)}];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(W,{value:n.serviceType,options:a,onChange:function(e){t(e)},children:"Service type"}),Object(x.jsx)(S.a,{"aria-label":"delete",className:i.margin,onClick:function(){c()},children:Object(x.jsx)(F.a,{})})]})},X=Object(O.a)((function(e){return{container:{},item:{width:"100%",margin:"auto"},darker:{backgroundColor:"#ddd"}}})),G=function(e){var n=e.serviceItems,t=e.onServiceItemsChanged,r=X();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(B.a,{variant:"outlined",color:"primary",onClick:function(){var e=[{status:"0x1",serviceType:"1"}].concat(Object(u.a)(n));t(e)},children:"Add Service Item"}),Object(x.jsx)(f.a,{className:r.container,component:"nav","aria-label":"main mailbox folders",children:n&&n.map((function(e,c){return Object(x.jsx)(m.a,{className:Object(M.a)(r.item,c%2&&r.darker),children:Object(x.jsx)(J,{serviceItem:e,onServiceTypeChanged:function(e){return function(e,r){var c=Object(u.a)(n);c[r].serviceType=e,t(c)}(e,c)},onServiceItemDeleted:function(){return function(e){var r=[].concat(Object(u.a)(n.slice(0,e)),Object(u.a)(n.slice(e+1)));t(r)}(c)}})},c)}))})]})},K=t(160),Y=Object(O.a)((function(e){return{root:{flexGrow:1,justifyContent:"center"},margin:{margin:e.spacing(1)},actions:{display:"inline"}}})),z=function(e){var n=e.service,t=e.currentIndex,r=e.onServiceDateUpdatedAction,c=e.onServiceMileageUpdatedAction,i=e.onServiceDealerUpdatedAction,a=e.onServiceBMWUpdatedAction,s=e.onServiceItemsUpdatedAction,l=Y();return Object(x.jsx)("div",{className:l.root,children:Object(x.jsxs)(K.a,{container:!0,spacing:3,children:[Object(x.jsxs)(K.a,{item:!0,xs:12,children:[Object(x.jsx)(k,{className:l.margin,value:n.date,onChange:function(e){r(t,e)},children:"Date of service"}),Object(x.jsx)(C,{className:l.margin,value:n.mileage,onChange:function(e){c(t,e)},children:"Mileage"}),Object(x.jsx)(C,{className:l.margin,value:n.dealer,onChange:function(e){i(t,e)},children:"Dealer"}),Object(x.jsx)(U,{className:l.margin,value:n.bmw,onChange:function(e){a(t,e)},children:"BMW"}),Object(x.jsx)(D,Object(o.a)({className:l.actions},e))]}),Object(x.jsx)(K.a,{item:!0,xs:12,children:Object(x.jsx)(G,{serviceItems:n.items,onServiceItemsChanged:function(e){s(t,e)}})})]})})},H=Object(O.a)((function(e){return{container:{},item:{width:"100%",margin:"auto"},darker:{backgroundColor:"#ddd"}}})),Q=function(e){var n=e.services,t=H();return Object(x.jsx)(f.a,{className:t.container,component:"nav","aria-label":"main mailbox folders",children:n&&n.map((function(r,c){return Object(x.jsx)(m.a,{className:Object(M.a)(t.item,c%2&&t.darker),children:Object(x.jsx)(z,Object(o.a)({service:r,currentIndex:c,totalCount:n.length},e))},c)}))})},Z=function(){var e=Object(l.c)((function(e){return e.servicesReducer})).services,n=Object(l.b)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Q,{services:e,onServiceDeleteAction:function(e){n(function(e){return function(n,t){var r=t().servicesReducer.services,c=[].concat(Object(u.a)(r.slice(0,e)),Object(u.a)(r.slice(e+1)));n(d(c))}}(e))},onServiceDateUpdatedAction:function(e,t){n(function(e,n){return function(t,r){var c=r().servicesReducer.services[e];if(c){var i=Object(o.a)(Object(o.a)({},c),{},{date:n});t(j(i,e))}}}(e,t))},onServiceDealerUpdatedAction:function(e,t){n(function(e,n){return function(t,r){var c=r().servicesReducer.services[e];if(c){var i=Object(o.a)(Object(o.a)({},c),{},{dealer:n});t(j(i,e))}}}(e,t))},onServiceMileageUpdatedAction:function(e,t){n(function(e,n){return function(t,r){var c=r().servicesReducer.services[e];if(c){var i=Object(o.a)(Object(o.a)({},c),{},{mileage:+n||c.mileage});t(j(i,e))}}}(e,t))},onServiceMoveUpAction:function(e){n(function(e){return function(n,t){var r=Object(u.a)(t().servicesReducer.services);e<=0||e>=r.length||(b(r,e,e-1),n(d(r)))}}(e))},onServiceMoveDownAction:function(e){n(function(e){return function(n,t){var r=Object(u.a)(t().servicesReducer.services);e<0||e>=r.length-1||(b(r,e,e+1),n(d(r)))}}(e))},onServiceBMWUpdatedAction:function(e,t){n(function(e,n){return function(t,r){var c=r().servicesReducer.services[e];if(c){var i=Object(o.a)(Object(o.a)({},c),{},{bmw:n});t(j(i,e))}}}(e,t))},onServiceItemsUpdatedAction:function(e,t){n(function(e,n){return function(t,r){var c=r().servicesReducer.services[e];if(c){var i=Object(o.a)(Object(o.a)({},c),{},{items:n});t(j(i,e))}}}(e,t))}})})},$=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Z,{})})},ee=function(e){var n=e.onServiceCreateAction;return Object(x.jsx)(B.a,{variant:"outlined",color:"primary",onClick:n,children:"Add Service"})},ne=function(){var e=Object(l.b)();return Object(x.jsx)(ee,{onServiceCreateAction:function(){e((function(e,n){var t=[{date:new Date,mileage:0,dealer:"",bmw:!1,status:"1",items:[]}].concat(Object(u.a)(n().servicesReducer.services));e(d(t))}))}})},te=function(e){var n=e.split("|");if(n.length<=4)return null;var t=n[4].split(";");return t.length<8?null:{date:new Date(parseInt(t[2]),parseInt(t[1])-1,parseInt(t[0])),mileage:parseInt(t[4]),dealer:t[6],bmw:"1"===t[5],status:"0x1",items:re(t.filter((function(e,n){return n>7})))}},re=function(e){if(!e.length)return[];if(4*parseInt(e[0])+1!==e.length)return[];for(var n=e.slice(1),t=[],r=0;r<n.length;)t.push(Object(o.a)(Object(o.a)({},{status:"0x1",serviceType:"1"}),{},{serviceType:n[r]})),r+=4;return t},ce=function(){return"1|g_mmi|steuern_servicehistory_erase\n"},ie=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e,t){return ae(e,t+n)})).join("\n")},ae=function(e,n){return n+"|g_mmi|steuern_servicehistory_add||"+e.date.getDate()+";"+(e.date.getMonth()+1)+";"+e.date.getFullYear()+";0;"+e.mileage+";"+(e.bmw?"1":"0")+";"+e.dealer+";0x1;"+se(e.items)},se=function(e){return e.length+";"+e.map((function(e){return e.serviceType+";"+e.status+";0;0"})).join(";")},le=function(e,n){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),t.setAttribute("download",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},oe=function(e){var n=e.onDowloadClick;return Object(x.jsx)(B.a,{variant:"outlined",color:"primary",onClick:n,children:"Save Services to file"})},ue=function(){var e=Object(l.b)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(oe,{onDowloadClick:function(){e((function(e,n){var t=n().servicesReducer.services,r=ce()+ie(t,2);le("service.tst",r)}))}})})},ve=t(62),de=t.n(ve),je=t(74),be=function(e){var n=e.onServiceUploaded,t=Object(c.useRef)(null);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{ref:t,type:"file",hidden:!0,onChange:function(e){if(e.preventDefault(),e.target&&e.target.files&&e.target.files.length){var t=new FileReader;t.onload=function(){var e=Object(je.a)(de.a.mark((function e(t){var r,c;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=t.target&&(null===(r=t.target.result)||void 0===r?void 0:r.toString()))?n(c):alert("Something went wrong. Try again");case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t.readAsText(e.target.files[0])}}}),Object(x.jsx)(B.a,{variant:"outlined",color:"primary",onClick:function(){t.current&&t.current.click()},children:"Upload Service file"})]})},fe=function(){var e=Object(l.b)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(be,{onServiceUploaded:function(n){e(function(e){return function(n,t){var r=e.split("\n").map((function(e){return e.replaceAll("\r","")}));console.log(r);for(var c=1,i=[];c<r.length;c++){var a=te(r[c]);a&&i.push(a)}n(d(i))}}(n))}})})},me=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(fe,{}),Object(x.jsx)(ne,{}),Object(x.jsx)(ue,{})]})};var Oe=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(me,{}),Object(x.jsx)($,{})]})},ge=t(47),he=t(75),pe=t.n(he),xe=t(76),ke={services:[]},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v:return Object(o.a)(Object(o.a)({},e),{},{services:n.payload});default:return Object(o.a)({},e)}},Ce=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ge.c;var Se,Ae=Object(ge.d)(Object(ge.b)({servicesReducer:ye}),Se,Ce(Object(ge.a)(xe.a,pe.a)));s.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(l.a,{store:Ae,children:Object(x.jsx)(Oe,{})})}),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.84a9774c.chunk.js.map